(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},r=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/L.U.N.A.L.A/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"05e3":function(e,t,a){e.exports=a.p+"img/Lunala_logo.e3cfda84.jpg"},"37e9":function(e,t,a){"use strict";a("49ea")},"49ea":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("e792"),a("0cdd");var i=a("2b0e"),n=a("5f5b");a("ab8b"),a("2dd8");i["default"].use(n["a"]);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("img",{staticStyle:{width:"300px",height:"300px"},attrs:{alt:"Vue logo",src:a("05e3")}}),i("Main")],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",{staticStyle:{"font-weight":"bold",color:"rgb(46, 24, 145)"}},[e._v("L.U.N.A.L.A")]),a("p",{staticStyle:{"margin-bottom":"40px"}},[e._v(" The Logographic Uncluttered Natural Aquisition Language Achiever ")]),a("b-dropdown",{ref:"dropdown",staticClass:"m-2",attrs:{text:"Origin Selection",variant:"info"}},[a("div",{staticClass:"dd_div"},[a("b-dropdown-form",[a("b-form-group",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[a("b-form-checkbox-group",{attrs:{options:e.origins,"aria-describedby":i,name:"flavour-1a"},on:{change:function(t){return e.updateChecklist()}},model:{value:e.selected_origin,callback:function(t){e.selected_origin=t},expression:"selected_origin"}})]}}])})],1)],1)]),a("b-form-group",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[a("b-form-checkbox-group",{attrs:{options:e.difficulties,"aria-describedby":i,name:"flavour-1a"},on:{change:function(t){return e.updateChecklist()}},model:{value:e.selected_diff,callback:function(t){e.selected_diff=t},expression:"selected_diff"}})]}}])}),a("b-form-group",{scopedSlots:e._u([{key:"default",fn:function(t){var i=t.ariaDescribedby;return[a("b-form-checkbox-group",{attrs:{options:e.numCards,"aria-describedby":i,name:"flavour-1a"},on:{change:function(t){return e.updateChecklist()}},model:{value:e.selected_cards,callback:function(t){e.selected_cards=t},expression:"selected_cards"}})]}}])}),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.left",modifiers:{hover:!0,left:!0}}],staticClass:"button",staticStyle:{"margin-bottom":"40px","background-color":"rgb(211, 209, 1)",color:"rgb(46, 24, 145)"},attrs:{title:"Generate a new shuffled batch of cards with the above selection fields.","data-toggle":"tooltip"},on:{click:function(t){return e.generateCards()}}},[e._v("Generate Cards")]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.right",modifiers:{hover:!0,right:!0}}],staticClass:"button",staticStyle:{"margin-bottom":"40px","background-color":"rgb(211, 209, 1)",color:"rgb(46, 24, 145)"},attrs:{title:"Toggle on/off whether clicking a card changes the language or the difficulty.","data-toggle":"tooltip"},on:{click:function(t){return e.setDifficulties()}}},[e._v("Update Difficulties")]),e.dataLoaded?e._e():a("div",[e._m(0),a("p",[e._v("Loading Cards...")])]),e.dataLoaded?a("div",{staticClass:"card_div"},[e._l(e.cardGrid,(function(t){return a("b-card-group",{key:e.cardGrid.indexOf(t),staticClass:"cards",attrs:{deck:""}},e._l(t,(function(t){return a("b-card",{key:t,staticClass:"card",attrs:{"text-variant":"white",header:e.getDifficulty(e.vocab_file["Difficulty"][t]),"header-bg-variant":"info"}},[a("b-card-text",{staticClass:"card_text"},[e._v(e._s(e.getText(t)))]),a("button",{staticClass:"stretched-link",staticStyle:{height:"0px","background-color":"rgb(46, 24, 145)","border-style":"none"},on:{click:function(a){return e.cycleCard(t)}}})],1)})),1)})),a("b-button",{staticClass:"button",staticStyle:{"margin-bottom":"40px","background-color":"rgb(211, 209, 1)",color:"rgb(46, 24, 145)"},on:{click:function(t){return e.getCards(!0)}}},[e._v("Next Cards")])],2):e._e(),a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.auth-modal",modifiers:{"auth-modal":!0}}],staticClass:"button",staticStyle:{"margin-bottom":"40px","margin-top":"40px","background-color":"rgb(23, 162, 184)"},on:{click:function(t){e.replace=!1}}},[e._v("Save Changes")]),a("b-button",{staticClass:"button",staticStyle:{"margin-bottom":"40px","margin-top":"40px"},attrs:{href:"https://lunala-api.herokuapp.com/getCSV",target:"_blank"}},[e._v("Download Flashcards")])],1),a("b-form-file",{staticClass:"file_in",attrs:{state:Boolean(e.file_input),accept:".csv",placeholder:"Choose a replacement CSV here...","drop-placeholder":"Drop file here..."},on:{change:e.loadCSV},model:{value:e.file_input,callback:function(t){e.file_input=t},expression:"file_input"}}),a("div",[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.auth-modal",modifiers:{"auth-modal":!0}}],staticClass:"button",staticStyle:{"margin-bottom":"40px"},on:{click:function(t){e.replace=!0}}},[e._v("Submit")])],1),a("b-modal",{attrs:{id:"auth-modal","hide-footer":"",title:"Save Changes"}},[a("div",[a("b-form",{on:{submit:function(t){t.preventDefault(),e.replace?e.replaceCSV():e.saveChanges()}}},[a("b-form-group",{attrs:{label:"Username:"}},[a("b-form-input",{attrs:{type:"text",required:"",placeholder:"Enter username"},model:{value:e.user_in,callback:function(t){e.user_in=t},expression:"user_in"}})],1),a("b-form-group",{attrs:{label:"Password:"}},[a("b-form-input",{attrs:{type:"password",required:"",placeholder:"Enter password"},model:{value:e.pass_in,callback:function(t){e.pass_in=t},expression:"pass_in"}})],1),a("b-button",{attrs:{type:"submit",variant:"info"}},[e._v("Submit")]),a("br"),a("br"),a("b-alert",{attrs:{show:""}},[e._v("Be sure you want to save these changes! They will overwrite the current flashcard file!")])],1)],1)])],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"spinner-border text-info",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])])}],l=a("1da1"),u=(a("d3b7"),a("159b"),a("b64b"),a("6062"),a("3ca3"),a("ddb0"),a("a630"),a("ac1f"),a("1276"),a("5319"),a("caad"),a("2532"),a("25f0"),a("96cf"),a("bc3a")),d=a.n(u),f=6,h={name:"Main",data:function(){return{CARDS_PER_ROW:7,vocab_file:[],file_input:[],offset:0,origins:[],dupMap:{},numSet:[],cardGrid:[],cardStates:{},dataLoaded:!1,difficulties:["New","Easy","Medium","Hard"],numCards:[],selected_origin:[],selected_diff:["New","Easy","Medium","Hard"],selected_cards:[],difficultyMode:!1,replace:!1,user_in:"",pass_in:"",userAuth:!1}},methods:{getVocab:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="https://lunala-api.herokuapp.com/getVocab",t.next=3,d.a.get(a).then((function(t){e.vocab_file=t.data,console.log("Vocab data:",e.vocab_file)})).catch((function(){alert("API connection failed; please input your own CSV.")}));case 3:case"end":return t.stop()}}),t)})))()},findDuplicates:function(){var e=this;Object.keys(this.vocab_file["Kanji"]).forEach((function(t){e.vocab_file["Kanji"][t]in e.dupMap||(e.dupMap[e.vocab_file["Kanji"][t]]=[]),e.dupMap[e.vocab_file["Kanji"][t]].push(t)}))},updateOrigins:function(){var e=this;this.origins=new Set,Object.keys(this.vocab_file["Origin"]).forEach((function(t){e.origins.add(e.vocab_file["Origin"][t])})),this.origins=Array.from(this.origins),this.origins.forEach((function(t){e.selected_origin.push(t)})),console.log("Origins:",this.origins)},loadCSV:function(e){var t=this,a=e.target.files[0],i=new FileReader;i.readAsText(a),i.onload=function(e){return t.checkData(e.target.result)}},checkData:function(e){var t=e.split("\n"),a=t[0].split(",");a[a.length-1]=a[a.length-1].replace(/^[\r\n]+|\.|[\r\n]+$/g,""),console.log("Headers:",a),a.length!=f&&(alert("CSV File not correctly formatted. \n\n              The CSV should contain columns in any order of: \n              Kanji, Hiragana, English, Origin, Difficulty, and Category"),this.file_input=[])},replaceCSV:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userAuth=!1,e.authenticate().then(Object(l["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.userAuth){t.next=20;break}if(console.log("FILE",e.file_input),e.file_input==[]){t.next=18;break}return a=new FormData,a.append("file",e.file_input),i="https://lunala-api.herokuapp.com/replace",t.next=8,d.a.post(i,a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){alert("New CSV successfully sent.")})).catch((function(e){alert("Authenticated, but file failed to send."),console.log("File send error:",e)}));case 8:return e.dataLoaded=!1,t.next=11,e.getVocab();case 11:e.findDuplicates(),e.updateOrigins(),e.selected_diff=["New","Easy","Medium","Hard"],e.selected_cards=[36],e.shuffleCards(),e.generateCards(0),e.dataLoaded=!0;case 18:t.next=21;break;case 20:alert("Authentication failed. Please try again!");case 21:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})))()},shuffleCards:function(){var e=function(e){var t,a=e.length;while(0!==a){t=Math.floor(Math.random()*a),a--;var i=[e[t],e[a]];e[a]=i[0],e[t]=i[1]}return e},t=Object.keys(this.vocab_file["Kanji"]).length;this.numSet=[];for(var a=[],i=[],n=0;n<t;n++)this.selected_diff.includes(this.getDifficulty(this.vocab_file["Difficulty"][n]))&&this.selected_origin.includes(this.vocab_file["Origin"][n])&&(a.includes(this.vocab_file["Kanji"][n])?i.push(n+": "+this.vocab_file["Kanji"][n]):(this.numSet.push(n),a.push(this.vocab_file["Kanji"][n])));this.numSet=e(this.numSet),console.log("Collisions:",i)},generateCards:function(){this.offset=0,this.shuffleCards(),this.getCards(!0)},getCards:function(e){if(this.offset<=Object.keys(this.vocab_file["Kanji"]).length){window.scrollTo(0,400);var t=!1;this.cardGrid=[];for(var a=this.selected_cards[0]/this.CARDS_PER_ROW,i=0;i<a;i++){if(t)break;for(var n=[],r=0;r<this.CARDS_PER_ROW;r++)try{n.push(this.numSet[this.CARDS_PER_ROW*i+r+this.offset]),this.cardStates[this.numSet[this.CARDS_PER_ROW*i+r+this.offset].toString()]=0}catch(s){console.log("Not enough cards in the deck."),t=!0,n.pop();break}this.cardGrid.push(n)}e&&(this.offset+=this.selected_cards[0])}},getDifficulty:function(e){return 0===e?"New":1===e?"Easy":2===e?"Medium":3===e?"Hard":"New"===e||"Easy"===e?1:"Easy"===e?2:"Easy"===e?3:void 0},getText:function(e){return 0===this.cardStates[e]?this.vocab_file["Kanji"][e]:1===this.cardStates[e]?this.vocab_file["Hiragana"][e]:this.vocab_file["English"][e]},cycleCard:function(e){var t=this;if(this.difficultyMode){var a=this.dupMap[this.vocab_file["Kanji"][e]];console.log("Updating:",a);var i=a[0],n=-1;n=this.vocab_file["Difficulty"][i]<3?this.vocab_file["Difficulty"][i]+1:0,a.forEach((function(e){t.vocab_file["Difficulty"][e]=n,console.log(e,t.vocab_file["Kanji"][e],t.vocab_file["Difficulty"][e])}))}else this.cardStates[e]=this.cardStates[e]+1,this.cardStates[e]>2&&(this.cardStates[e]=0);this.$forceUpdate()},setDifficulties:function(){this.difficultyMode=!this.difficultyMode},updateChecklist:function(){var e=this.selected_cards[this.selected_cards.length-1];this.selected_cards=[],this.selected_cards.push(e)},authenticate:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={},i="https://lunala-api.herokuapp.com/getAuth",t.next=4,d.a.get(i).then((function(e){a=e.data,console.log("Credentials retrieved.")})).catch((function(){alert("API connection failed; please try again.")}));case 4:return Object.keys(a).forEach((function(t){if(e.user_in===t)return e.pass_in===a[e.user_in]&&(e.userAuth=!0,!0)})),t.abrupt("return",!1);case 6:case"end":return t.stop()}}),t)})))()},saveChanges:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.userAuth=!1,e.authenticate().then((function(){if(e.userAuth){var t="https://lunala-api.herokuapp.com/saveCSV";d.a.post(t,e.vocab_file).then((function(){alert("Changes successfully saved.")})).catch((function(e){alert("Authenticated, but file failed to send"),console.log("File send error:",e)}))}else alert("Authentication failed! Changes unsaved.");console.log("Sent flash cards:",e.vocab_file)}));case 2:case"end":return t.stop()}}),t)})))()},setCardsPerRow:function(){this.numCards=[];var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.CARDS_PER_ROW=e<=300?1:e<=560?2:e<=768?3:e<=1e3?4:e<=1200?5:e<=1400?6:e<=1600?7:8,this.numCards.push(2*this.CARDS_PER_ROW),this.numCards.push(5*this.CARDS_PER_ROW),this.numCards.push(10*this.CARDS_PER_ROW),this.numCards.push(40*this.CARDS_PER_ROW),this.numCards.push(67*this.CARDS_PER_ROW),this.selected_cards=[5*this.CARDS_PER_ROW],this.$forceUpdate(),this.dataLoaded&&this.getCards(!1)}},beforeMount:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setCardsPerRow(),t.next=3,e.getVocab();case 3:e.findDuplicates(),e.updateOrigins(),e.shuffleCards(),e.generateCards(0),e.dataLoaded=!0;case 8:case"end":return t.stop()}}),t)})))()},created:function(){window.addEventListener("resize",this.setCardsPerRow)},destroyed:function(){window.removeEventListener("resize",this.setCardsPerRow)}},p=h,b=(a("37e9"),a("2877")),g=Object(b["a"])(p,o,c,!1,null,"ebd1d3b0",null),v=g.exports,m={name:"App",components:{Main:v},created:function(){document.title="L.U.N.A.L.A"}},_=m,y=(a("034f"),Object(b["a"])(_,r,s,!1,null,null,null)),C=y.exports;i["default"].config.productionTip=!1,new i["default"]({render:function(e){return e(C)}}).$mount("#app")},"85ec":function(e,t,a){}});
//# sourceMappingURL=app.829c3aff.js.map